<templates id="template" xml:space="preserve">
    <!-- Ant Design Pro V5 Style Header -->
    <t t-inherit="web.NavBar" t-inherit-mode="extension" owl="1">
        <xpath expr="//nav[hasclass('o_main_navbar')]" position="replace">
            <nav class="o_main_navbar ant-navbar" style="display: flex; justify-content: space-between; width: 100%" data-command-category="navbar">
                <div class="d-flex align-items-center">
                    <!-- Custom Ant Design Apps Menu -->
                    <div class="ant-apps-menu-wrapper">
                        <t t-if="env.isSmall">
                               <button type="button" id="ant-apps-menu-trigger-all-apps" class="ant-apps-menu-trigger" title="Applications">
                                <svg class="ant-apps-icon" viewBox="0 0 24 24" width="20" height="20">
                                    <path fill="currentColor" d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"/>
                                </svg>
                                <span class="ant-apps-text">Apps</span>
                            </button>
                        </t>
                        <t t-else="">
                            <button type="button" id="ant-apps-menu-trigger-all-apps" class="ant-apps-menu-trigger" title="Applications">
                                <svg class="ant-apps-icon" viewBox="0 0 24 24" width="20" height="20">
                                    <path fill="currentColor" d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"/>
                                </svg>
                                <span class="ant-apps-text">Apps</span>
                            </button>
                        </t>
                        <!-- Ant Design v5 Popover -->
                        <div class="ant-apps-popover">
                            <div class="ant-popover-content">
                                <!-- Header -->
                                <div class="ant-apps-header">
                                    <div class="ant-apps-title">
                                        <svg class="ant-apps-header-icon" viewBox="0 0 24 24" width="24" height="24">
                                            <path fill="currentColor" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                        </svg>
                                        <span>Applications</span>
                                        <t t-if="env.isSmall">
                                        <button type="button" class="ant-apps-close-button"
                                         t-on-click="() => this.closeAppsMenu()"
                                         title="Close" style="background: transparent; border: none; padding: 4px; border-radius: 50%; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center;">
                                            <svg viewBox="0 0 24 24" width="20" height="20" style="color: rgba(0, 0, 0, 0.45); transition: all 0.3s ease;">
                                                <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                                            </svg>
                                        </button>
                                        </t>
                                    </div>
                                    <div class="ant-apps-search">
                                        <!-- <svg class="ant-search-icon" viewBox="0 0 24 24" width="16" height="16">
                                            <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                                        </svg> -->
                                        <i class="o_searchview_icon oi oi-search me-2" role="img"></i>
                                        <input type="text" placeholder="Search apps..." class="ant-apps-search-input"/>
                                    </div>
                                </div>

                                <!-- Apps Grid -->
                                <div class="ant-apps-grid">
                                    <!-- Apps will be generated by JavaScript -->
                                </div>

                                <!-- Footer -->
                                <div class="ant-apps-footer">
                                    <div class="ant-apps-stats">
                                        <span class="ant-apps-count">Loading applications...</span>
                                        <span class="ant-apps-separator">â€¢</span>
                                        <span class="ant-apps-version">Odoo 18.0</span>
                                    </div>
                                    <a href="/web#action=base.open_module_tree" class="btn btn-primary" t-on-click="() => this.closeAppsMenu()">
                                        <svg viewBox="0 0 24 24" width="16" height="16">
                                            <path fill="currentColor" d="M16 12V4h1V2H7v2h1v8l-2 2v2h5v6h2v-6h5v-2l-2-2zm-6-3c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"/>
                                        </svg>
                                        <span style='margin-left: 4px'>Apps Store</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

<t t-if="!env.isSmall">
        <a href="/web" class="o_menu_brand ml-2" style="margin-left: 16px; display: flex; align-items: center; text-decoration: none; color: inherit;" role="button">
            <t t-if="state.logo">
                <img
                    class="o_menu_brand_icon"
                    style="width: 28px; height: 28px; margin-right: 12px;"
                    t-att-src="getViewLogo()"
                    alt="Logo"
                />
            </t>
            <t t-else="">
                <img
                    class="o_menu_brand_icon"
                    style="width: 28px; height: 28px; margin-right: 12px;"
                    src="https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg"
                    alt="Default Logo"
                />
            </t>
    <span style="font-size: 16px; font-weight: 500;">
        <t t-esc="state.brandName"/>
    </span>
</a>
</t>


                </div>

                <t t-if="!env.isSmall">
                    <t t-call="web.NavBar.SectionsMenu">
                        <t t-set="sections" t-value="state.sections || []"/>
                    </t>
                </t>

              

                <!-- Systray -->
                <div class="o_menu_systray d-flex flex-shrink-0 ms-auto" role="menu">
                    <t t-foreach="systrayItems" t-as="item" t-key="item.key">
                        <!-- This ensures the correct order of the systray items -->
                        <div t-att-data-index="item.index"/>
                        <ErrorHandler onError="error => this.handleItemError(error, item)">
                            <t t-component="item.Component" t-props="item.props"/>
                        </ErrorHandler>
                    </t>
                </div>
            </nav>
        </xpath>
    </t>


</templates>
